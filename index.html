<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Wine Log</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
        href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600;700&family=Work+Sans:wght@400;600&family=IBM+Plex+Mono:wght@400;600&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="css/styles.css" />
</head>

<body>
    <!-- soft background blobs (purely visual) -->
    <div class="bg">
        <div class="blob blob-a"></div>
        <div class="blob blob-b"></div>
    </div>

    <header class="topbar">
        <h1>Wine Log</h1>

        <!-- Global search (3) -->
        <div class="topbar-search">
            <input id="globalSearch" type="search" placeholder="Search name or notesâ€¦" aria-label="Global search" />
        </div>

        <div class="topbar-actions">
            <!-- Theme toggle -->
            <button id="toggleTheme" class="ghost" aria-label="Toggle theme">ðŸŒ™</button>
        </div>
    </header>

    <!-- Tabs with count badges (2) -->
    <nav class="tabs" role="tablist">
        <button class="tab active" data-tab="whiteForm" role="tab" aria-selected="true">
            White <span class="badge" id="countWhite">0</span>
        </button>
        <button class="tab" data-tab="redForm" role="tab" aria-selected="false">
            Red <span class="badge" id="countRed">0</span>
        </button>
        <button class="tab" data-tab="logsView" role="tab" aria-selected="false">
            Logs <span class="badge" id="countAll">0</span>
        </button>
        <button class="tab" data-tab="publicView" role="tab" aria-selected="false">
            Public
        </button>

    </nav>

    <!-- WHITE WINE FORM -->
    <section id="whiteForm" class="tabpanel active" role="tabpanel" aria-labelledby="tab-white">
        <form id="formWhite" class="card">
            <h2>White Wine Tasting Sheet</h2>

            <div class="grid">
                <label class="full">
                    Wine Name
                    <input type="text" name="name" required />
                </label>

                <!-- APPEARANCE group -->
                <fieldset class="group full">
                    <legend class="group-title">APPEARANCE</legend>
                    <div class="group-grid">
                        <fieldset>
                            <legend>Clarity</legend>
                            <label><input type="radio" name="appearance_clarity" value="clear" required /> clear</label>
                            <label><input type="radio" name="appearance_clarity" value="cloudy" /> cloudy</label>
                        </fieldset>

                        <fieldset>
                            <legend>Hue Density</legend>
                            <label><input type="radio" name="hue_density" value="pale" required /> pale</label>
                            <label><input type="radio" name="hue_density" value="medium" /> medium</label>
                            <label><input type="radio" name="hue_density" value="dark" /> dark</label>
                        </fieldset>

                        <fieldset>
                            <legend>Hue</legend>
                            <label><input type="radio" name="hue" value="greenish" required /> greenish</label>
                            <label><input type="radio" name="hue" value="strawyellow" /> straw yellow</label>
                            <label><input type="radio" name="hue" value="yellow" /> yellow</label>
                            <label><input type="radio" name="hue" value="deep yellow" /> deep yellow</label>
                            <label><input type="radio" name="hue" value="gold" /> gold</label>
                            <label><input type="radio" name="hue" value="amber" /> amber</label>
                        </fieldset>
                    </div>
                </fieldset>

                <!-- NOSE group -->
                <fieldset class="group full">
                    <legend class="group-title">NOSE</legend>
                    <div class="group-grid">
                        <fieldset class="full">
                            <legend>Smell Intensity</legend>
                            <label><input type="radio" name="smell_intensity" value="non-aromatic" required />
                                non-aromatic</label>
                            <label><input type="radio" name="smell_intensity" value="semi-aromatic" />
                                semi-aromatic</label>
                            <label><input type="radio" name="smell_intensity" value="aromatic" /> aromatic</label>
                        </fieldset>

                        <fieldset class="full">
                            <legend>Smell Descriptors: Fresh Fruit</legend>
                            <label><input type="checkbox" name="smell_fresh" value="citrus" /> citrus</label>
                            <label><input type="checkbox" name="smell_fresh" value="apple" /> apple</label>
                            <label><input type="checkbox" name="smell_fresh" value="melon" /> melon</label>
                            <label><input type="checkbox" name="smell_fresh" value="peach" /> peach</label>
                            <label><input type="checkbox" name="smell_fresh" value="pear" /> pear</label>
                        </fieldset>

                        <fieldset class="full">
                            <legend>Smell Descriptors (Other)</legend>
                            <label><input type="checkbox" name="smell_other" value="dried fruit" /> dried fruit</label>
                            <label><input type="checkbox" name="smell_other" value="mineral" /> mineral</label>
                            <label><input type="checkbox" name="smell_other" value="vegetal" /> vegetal</label>
                            <label><input type="checkbox" name="smell_other" value="herbal" /> herbal</label>
                            <label><input type="checkbox" name="smell_other" value="earth" /> earth</label>
                            <label><input type="checkbox" name="smell_other" value="toast" /> toast</label>
                            <label><input type="checkbox" name="smell_other" value="vanilla" /> vanilla</label>
                            <label><input type="checkbox" name="smell_other" value="oak" /> oak</label>
                            <label><input type="checkbox" name="smell_other" value="spice" /> spice</label>
                            <label class="full other-input">
                                other:
                                <input type="text" name="smell_other_text" placeholder="typeâ€¦" />
                            </label>

                        </fieldset>
                    </div>
                </fieldset>

                <!-- PALATE group -->
                <fieldset class="group full">
                    <legend class="group-title">PALATE</legend>
                    <div class="group-grid">
                        <fieldset>
                            <legend>Sweetness</legend>
                            <label><input type="radio" name="sweetness" value="dry" required /> dry</label>
                            <label><input type="radio" name="sweetness" value="medium" /> medium</label>
                            <label><input type="radio" name="sweetness" value="sweet" /> sweet</label>
                        </fieldset>

                        <fieldset>
                            <legend>Sourness</legend>
                            <label><input type="radio" name="sourness" value="not sour" required /> not sour</label>
                            <label><input type="radio" name="sourness" value="slightly sour" /> slightly sour</label>
                            <label><input type="radio" name="sourness" value="sour" /> sour</label>
                            <label><input type="radio" name="sourness" value="very sour" /> very sour</label>
                        </fieldset>

                        <fieldset>
                            <legend>Bitterness</legend>
                            <label><input type="radio" name="bitterness" value="not bitter" required /> not
                                bitter</label>
                            <label><input type="radio" name="bitterness" value="slightly bitter" /> slightly
                                bitter</label>
                            <label><input type="radio" name="bitterness" value="bitter" /> bitter</label>
                            <label><input type="radio" name="bitterness" value="very bitter" /> very bitter</label>
                        </fieldset>

                        <fieldset>
                            <legend>Astringency</legend>
                            <label><input type="radio" name="astringency" value="not astringent" required /> not
                                astringent</label>
                            <label><input type="radio" name="astringency" value="slightly astringent" /> slightly
                                astringent</label>
                            <label><input type="radio" name="astringency" value="astringent" /> astringent</label>
                        </fieldset>

                        <fieldset class="full">
                            <legend>Descriptors on the palate & finish â€” fresh fruit</legend>
                            <label><input type="checkbox" name="palate_fresh" value="citrus" /> citrus</label>
                            <label><input type="checkbox" name="palate_fresh" value="apple" /> apple</label>
                            <label><input type="checkbox" name="palate_fresh" value="melon" /> melon</label>
                            <label><input type="checkbox" name="palate_fresh" value="peach" /> peach</label>
                            <label><input type="checkbox" name="palate_fresh" value="pear" /> pear</label>
                        </fieldset>

                        <fieldset class="full">
                            <legend>Descriptors on the palate & finish (other)</legend>
                            <label><input type="checkbox" name="palate_other" value="dried fruit" /> dried fruit</label>
                            <label><input type="checkbox" name="palate_other" value="mineral" /> mineral</label>
                            <label><input type="checkbox" name="palate_other" value="vegetal" /> vegetal</label>
                            <label><input type="checkbox" name="palate_other" value="herbal" /> herbal</label>
                            <label><input type="checkbox" name="palate_other" value="earth" /> earth</label>
                            <label><input type="checkbox" name="palate_other" value="toast" /> toast</label>
                            <label><input type="checkbox" name="palate_other" value="vanilla" /> vanilla</label>
                            <label><input type="checkbox" name="palate_other" value="oak" /> oak</label>
                            <label><input type="checkbox" name="palate_other" value="spice" /> spice</label>
                            <label class="full other-input">
                                other:
                                <input type="text" name="palate_other_text" placeholder="typeâ€¦" />
                            </label>
                        </fieldset>

                        <fieldset>
                            <legend>Body</legend>
                            <label><input type="radio" name="body" value="light" required /> light</label>
                            <label><input type="radio" name="body" value="medium" /> medium</label>
                            <label><input type="radio" name="body" value="full" /> full</label>
                        </fieldset>

                        <fieldset>
                            <legend>Texture</legend>
                            <label><input type="radio" name="texture" value="smooth" required /> smooth</label>
                            <label><input type="radio" name="texture" value="tactile" /> tactile</label>
                            <label><input type="radio" name="texture" value="coarse" /> coarse</label>
                        </fieldset>

                        <fieldset>
                            <legend>Balance</legend>
                            <label><input type="radio" name="balance" value="unbalanced" required /> unbalanced</label>
                            <label><input type="radio" name="balance" value="balanced" /> balanced</label>
                        </fieldset>

                        <fieldset>
                            <legend>Finish</legend>
                            <label><input type="radio" name="finish" value="short" required /> short</label>
                            <label><input type="radio" name="finish" value="medium" /> medium</label>
                            <label><input type="radio" name="finish" value="long" /> long</label>
                        </fieldset>
                    </div>
                </fieldset>

                <label class="full">
                    Side notes
                    <textarea name="notes" rows="4" placeholder="freeform notesâ€¦"></textarea>
                </label>

                <label class="full">
                    Photo (label/sheet)
                    <input type="file" name="photo" accept="image/*" />
                </label>
            </div>

            <div class="actions">
                <button type="submit" class="primary">Save White Entry</button>
                <button type="reset" class="ghost">Clear</button>
            </div>
        </form>
    </section>

    <!-- RED WINE FORM -->
    <section id="redForm" class="tabpanel" role="tabpanel" aria-labelledby="tab-red">
        <form id="formRed" class="card">
            <h2>Red Wine Tasting Sheet</h2>

            <div class="grid">
                <label class="full">
                    Wine Name
                    <input type="text" name="name" required />
                </label>

                <!-- APPEARANCE group -->
                <fieldset class="group full">
                    <legend class="group-title">APPEARANCE</legend>
                    <div class="group-grid">
                        <fieldset class="full">
                            <legend>Clarity</legend>
                            <label><input type="radio" name="appearance_clarity" value="clear" required /> clear</label>
                            <label><input type="radio" name="appearance_clarity" value="cloudy" /> cloudy</label>
                        </fieldset>

                        <fieldset>
                            <legend>Hue Density</legend>
                            <label><input type="radio" name="hue_density" value="pale" required /> pale</label>
                            <label><input type="radio" name="hue_density" value="medium" /> medium</label>
                            <label><input type="radio" name="hue_density" value="dark" /> dark</label>
                        </fieldset>

                        <fieldset>
                            <legend>Hue</legend>
                            <label><input type="radio" name="hue" value="purple" required /> purple</label>
                            <label><input type="radio" name="hue" value="ruby" /> ruby</label>
                            <label><input type="radio" name="hue" value="garnet" /> garnet</label>
                            <label><input type="radio" name="hue" value="brown" /> brown</label>
                        </fieldset>
                    </div>
                </fieldset>

                <!-- NOSE group -->
                <fieldset class="group full">
                    <legend class="group-title">NOSE</legend>
                    <div class="group-grid">
                        <fieldset class="full">
                            <legend>Smell Intensity</legend>
                            <label><input type="radio" name="smell_intensity" value="non-aromatic" required />
                                non-aromatic</label>
                            <label><input type="radio" name="smell_intensity" value="semi-aromatic" />
                                semi-aromatic</label>
                            <label><input type="radio" name="smell_intensity" value="aromatic" /> aromatic</label>
                        </fieldset>

                        <fieldset class="full">
                            <legend>Smell Descriptors: Fruit</legend>
                            <label><input type="checkbox" name="smell_fruit_red" value="cherry" /> cherry</label>
                            <label><input type="checkbox" name="smell_fruit_red" value="strawberry" />
                                strawberry</label>
                            <label><input type="checkbox" name="smell_fruit_red" value="plum" /> plum</label>
                            <label><input type="checkbox" name="smell_fruit_red" value="raspberry" /> raspberry</label>
                            <label><input type="checkbox" name="smell_fruit_red" value="blackberry" />
                                blackberry</label>
                            <label><input type="checkbox" name="smell_fruit_red" value="black currant" /> black
                                currant</label>
                        </fieldset>

                        <fieldset class="full">
                            <legend>Smell Fescriptors (Other)</legend>
                            <label><input type="checkbox" name="smell_other" value="dried fruit" /> dried fruit</label>
                            <label><input type="checkbox" name="smell_other" value="mineral" /> mineral</label>
                            <label><input type="checkbox" name="smell_other" value="vegetal" /> vegetal</label>
                            <label><input type="checkbox" name="smell_other" value="herbal" /> herbal</label>
                            <label><input type="checkbox" name="smell_other" value="earth" /> earth</label>
                            <label><input type="checkbox" name="smell_other" value="toast" /> toast</label>
                            <label><input type="checkbox" name="smell_other" value="vanilla" /> vanilla</label>
                            <label><input type="checkbox" name="smell_other" value="oak" /> oak</label>
                            <label><input type="checkbox" name="smell_other" value="spice" /> spice</label>
                            <label class="full other-input">
                                other:
                                <input type="text" name="smell_other_text" placeholder="typeâ€¦" />
                            </label>
                        </fieldset>
                    </div>
                </fieldset>

                <!-- PALATE group -->
                <fieldset class="group full">
                    <legend class="group-title">PALATE</legend>
                    <div class="group-grid">
                        <fieldset>
                            <legend>Sweetness</legend>
                            <label><input type="radio" name="sweetness" value="dry" required /> dry</label>
                            <label><input type="radio" name="sweetness" value="slightly sweet" /> slightly sweet</label>
                            <label><input type="radio" name="sweetness" value="sweet" /> sweet</label>
                            <label><input type="radio" name="sweetness" value="very sweet" /> very sweet</label>
                        </fieldset>

                        <fieldset>
                            <legend>Sourness</legend>
                            <label><input type="radio" name="sourness" value="not sour" required /> not sour</label>
                            <label><input type="radio" name="sourness" value="slightly sour" /> slightly sour</label>
                            <label><input type="radio" name="sourness" value="sour" /> sour</label>
                            <label><input type="radio" name="sourness" value="very sour" /> very sour</label>
                        </fieldset>

                        <fieldset>
                            <legend>Bitterness</legend>
                            <label><input type="radio" name="bitterness" value="not bitter" required /> not
                                bitter</label>
                            <label><input type="radio" name="bitterness" value="slightly bitter" /> slightly
                                bitter</label>
                            <label><input type="radio" name="bitterness" value="bitter" /> bitter</label>
                        </fieldset>

                        <fieldset>
                            <legend>Astringency</legend>
                            <label><input type="radio" name="astringency" value="not astringent" required /> not
                                astringent</label>
                            <label><input type="radio" name="astringency" value="slightly astringent" /> slightly
                                astringent</label>
                            <label><input type="radio" name="astringency" value="astringent" /> astringent</label>
                        </fieldset>

                        <fieldset class="full">
                            <legend>Descriptors on the palate & finish â€” fruit</legend>
                            <label><input type="checkbox" name="palate_fruit_red" value="cherry" /> cherry</label>
                            <label><input type="checkbox" name="palate_fruit_red" value="strawberry" />
                                strawberry</label>
                            <label><input type="checkbox" name="palate_fruit_red" value="plum" /> plum</label>
                            <label><input type="checkbox" name="palate_fruit_red" value="raspberry" /> raspberry</label>
                            <label><input type="checkbox" name="palate_fruit_red" value="blackberry" />
                                blackberry</label>
                            <label><input type="checkbox" name="palate_fruit_red" value="black currant" /> black
                                currant</label>
                        </fieldset>

                        <fieldset class="full">
                            <legend>Descriptors on the palate & finish (other)</legend>
                            <label><input type="checkbox" name="palate_other" value="dried fruit" /> dried fruit</label>
                            <label><input type="checkbox" name="palate_other" value="mineral" /> mineral</label>
                            <label><input type="checkbox" name="palate_other" value="vegetal" /> vegetal</label>
                            <label><input type="checkbox" name="palate_other" value="herbal" /> herbal</label>
                            <label><input type="checkbox" name="palate_other" value="earth" /> earth</label>
                            <label><input type="checkbox" name="palate_other" value="toast" /> toast</label>
                            <label><input type="checkbox" name="palate_other" value="vanilla" /> vanilla</label>
                            <label><input type="checkbox" name="palate_other" value="oak" /> oak</label>
                            <label><input type="checkbox" name="palate_other" value="spice" /> spice</label>
                            <label class="full other-input">
                                other:
                                <input type="text" name="palate_other_text" placeholder="typeâ€¦" />
                            </label>
                        </fieldset>

                        <fieldset>
                            <legend>Body</legend>
                            <label><input type="radio" name="body" value="light" required /> light</label>
                            <label><input type="radio" name="body" value="medium" /> medium</label>
                            <label><input type="radio" name="body" value="full" /> full</label>
                        </fieldset>

                        <fieldset>
                            <legend>Texture</legend>
                            <label><input type="radio" name="texture" value="smooth" required /> smooth</label>
                            <label><input type="radio" name="texture" value="tactile" /> tactile</label>
                            <label><input type="radio" name="texture" value="coarse" /> coarse</label>
                        </fieldset>

                        <fieldset>
                            <legend>Balance</legend>
                            <label><input type="radio" name="balance" value="unbalanced" required /> unbalanced</label>
                            <label><input type="radio" name="balance" value="balanced" /> balanced</label>
                        </fieldset>

                        <fieldset>
                            <legend>Finish</legend>
                            <label><input type="radio" name="finish" value="short" required /> short</label>
                            <label><input type="radio" name="finish" value="medium" /> medium</label>
                            <label><input type="radio" name="finish" value="long" /> long</label>
                        </fieldset>
                    </div>
                </fieldset>

                <label class="full">
                    Side notes
                    <textarea name="notes" rows="4" placeholder="freeform notesâ€¦"></textarea>
                </label>

                <label class="full">
                    Photo (label/sheet)
                    <input type="file" name="photo" accept="image/*" />
                </label>
            </div>

            <div class="actions">
                <button type="submit" class="primary">Save Red Entry</button>
                <button type="reset" class="ghost">Clear</button>
            </div>
        </form>
    </section>

    <!-- LOGS / REVIEW -->
    <section id="logsView" class="tabpanel" role="tabpanel" aria-labelledby="tab-logs">
        <div class="card">
            <h2>All Logs</h2>

            <!-- (4) Filter chips -->
            <div class="toolbar">
                <div class="chips" id="typeChips" role="group" aria-label="Type filter">
                    <button class="chip selected" data-type="">All</button>
                    <button class="chip" data-type="white">White</button>
                    <button class="chip" data-type="red">Red</button>
                </div>

                <!-- local search still here for refinement -->
                <input id="search" type="search" placeholder="Search within logsâ€¦" />
                <div class="spacer"></div>
            </div>

            <ul id="logList" class="list"></ul>
        </div>
    </section>

    <section id="publicView" class="tabpanel" role="tabpanel" aria-labelledby="tab-public">
        <div class="card">
            <h2>Public Logs</h2>
            <div class="toolbar">
                <button id="exportPublic" class="primary">Export Public JSON</button>
                <div class="spacer"></div>
                <a class="mono" href="/data/public-logs.json" target="_blank" rel="noopener">View current JSON</a>
            </div>
            <ul id="publicLogList" class="list"></ul>
        </div>
    </section>


    <!-- (8) Quick Add dialog (also used by mobile FAB) -->
    <dialog id="quickAddDialog">
        <form id="quickAddForm" method="dialog" class="card quickadd">
            <h3>Quick Add</h3>
            <label>
                Name
                <input type="text" name="name" placeholder="e.g., 2021 Chablis..." required />
            </label>
            <div class="row">
                <label class="selectlike">
                    Type
                    <select name="type">
                        <option value="white" selected>White</option>
                        <option value="red">Red</option>
                    </select>
                </label>
                <label>
                    Photo (optional)
                    <input type="file" name="photo" accept="image/*" />
                </label>
            </div>
            <footer class="actions">
                <button value="cancel" class="ghost">Cancel</button>
                <button id="quickAddSave" class="primary">Save</button>
            </footer>
        </form>
    </dialog>

    <!-- Floating action button becomes chat opener -->
    <button id="fabQuickAdd" class="fab" aria-label="Open AI chat">ðŸ’¬</button>

    <!-- Inline detail still uses dialog when needed -->
    <dialog id="detailDialog">
        <article id="detailContent"></article>
        <footer class="dialog-actions">
            <button id="editEntry" class="primary">Edit</button>
            <button id="deleteEntry" class="danger">Delete</button>
            <button id="closeDetail" class="ghost">Close</button>
        </footer>
    </dialog>

    <!-- AI Chat (Gemini) -->
    <dialog id="chatDialog">
        <form method="dialog" class="card chat">
            <header class="chat-header">
                <div class="chat-title">
                    <strong>AI Chat</strong>
                    <span class="meta">about wine</span>
                </div>
                <div class="chat-tools">
                    <button value="close" class="ghost" aria-label="Close">âœ•</button>
                </div>
            </header>

            <div id="chatMessages" class="chat-messages" aria-live="polite"></div>

            <div class="chat-input">
                <textarea id="chatInput" rows="2" placeholder="any wine-related questionâ€¦"></textarea>
                <button id="chatSend" type="button" class="primary">Send</button>
            </div>
        </form>
    </dialog>


    <script src="js/script.js" defer></script>
</body>

</html>